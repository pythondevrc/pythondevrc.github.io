"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5597],{5597:(v,b,l)=>{l.r(b),l.d(b,{MapModule:()=>d});var h=l(4755),s=l(7151),M=l(5030),f=l(6775),x=l(5861),t=l(9523),Z=l(6550),m=l(9287);function T(o,g){if(1&o){const n=t.EpF();t.TgZ(0,"div",10)(1,"ion-header")(2,"ion-toolbar")(3,"ion-buttons",11)(4,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.previousMap1())}),t._UZ(5,"ion-icon",13),t.qZA()(),t.TgZ(6,"div",0)(7,"ion-item")(8,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.agregarTala(e.mapNumber1))}),t._UZ(9,"ion-icon",14),t.qZA(),t.TgZ(10,"ion-input",15),t.NdJ("ngModelChange",function(e){t.CHM(n);const p=t.oxw();return t.KtG(p.mapNumber1=e)}),t.qZA(),t.TgZ(11,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.loadMap1())}),t._UZ(12,"ion-icon",16),t.qZA()()(),t.TgZ(13,"ion-buttons",17)(14,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.nextMap1())}),t._UZ(15,"ion-icon",18),t.qZA()()()(),t._UZ(16,"iframe",19),t.qZA()}if(2&o){const n=t.oxw();t.xp6(10),t.Q6J("ngModel",n.mapNumber1),t.xp6(6),t.Q6J("src",n.mapUrl1,t.uOi)}}function r(o,g){if(1&o){const n=t.EpF();t.TgZ(0,"div",10)(1,"div",20)(2,"ion-header")(3,"ion-toolbar")(4,"ion-buttons",11)(5,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.previousMap1())}),t._UZ(6,"ion-icon",13),t.qZA()(),t.TgZ(7,"div",0)(8,"ion-item")(9,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.agregarTala(e.mapNumber1))}),t._UZ(10,"ion-icon",14),t.qZA(),t.TgZ(11,"ion-input",15),t.NdJ("ngModelChange",function(e){t.CHM(n);const p=t.oxw();return t.KtG(p.mapNumber1=e)}),t.qZA(),t.TgZ(12,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.loadMap1())}),t._UZ(13,"ion-icon",16),t.qZA()()(),t.TgZ(14,"ion-buttons",17)(15,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.nextMap1())}),t._UZ(16,"ion-icon",18),t.qZA()()()(),t._UZ(17,"iframe",19),t.qZA(),t.TgZ(18,"div",20)(19,"ion-header")(20,"ion-toolbar")(21,"ion-buttons",11)(22,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.previousMap2())}),t._UZ(23,"ion-icon",13),t.qZA()(),t.TgZ(24,"div",0)(25,"ion-item")(26,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.agregarTala(e.mapNumber2))}),t._UZ(27,"ion-icon",14),t.qZA(),t.TgZ(28,"ion-input",15),t.NdJ("ngModelChange",function(e){t.CHM(n);const p=t.oxw();return t.KtG(p.mapNumber2=e)}),t.qZA(),t.TgZ(29,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.loadMap2())}),t._UZ(30,"ion-icon",16),t.qZA()()(),t.TgZ(31,"ion-buttons",17)(32,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.nextMap2())}),t._UZ(33,"ion-icon",18),t.qZA()()()(),t._UZ(34,"iframe",19),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(11),t.Q6J("ngModel",n.mapNumber1),t.xp6(6),t.Q6J("src",n.mapUrl1,t.uOi),t.xp6(11),t.Q6J("ngModel",n.mapNumber2),t.xp6(6),t.Q6J("src",n.mapUrl2,t.uOi)}}function _(o,g){if(1&o){const n=t.EpF();t.TgZ(0,"div",10)(1,"div",21)(2,"div",22)(3,"ion-header")(4,"ion-toolbar")(5,"ion-buttons",11)(6,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.previousMap1())}),t._UZ(7,"ion-icon",13),t.qZA()(),t.TgZ(8,"div",0)(9,"ion-item")(10,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.agregarTala(e.mapNumber1))}),t._UZ(11,"ion-icon",14),t.qZA(),t.TgZ(12,"ion-input",15),t.NdJ("ngModelChange",function(e){t.CHM(n);const p=t.oxw();return t.KtG(p.mapNumber1=e)}),t.qZA(),t.TgZ(13,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.loadMap1())}),t._UZ(14,"ion-icon",16),t.qZA()()(),t.TgZ(15,"ion-buttons",17)(16,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.nextMap1())}),t._UZ(17,"ion-icon",18),t.qZA()()()(),t._UZ(18,"iframe",19),t.qZA(),t.TgZ(19,"div",22)(20,"ion-header")(21,"ion-toolbar")(22,"ion-buttons",11)(23,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.previousMap2())}),t._UZ(24,"ion-icon",13),t.qZA()(),t.TgZ(25,"div",0)(26,"ion-item")(27,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.agregarTala(e.mapNumber2))}),t._UZ(28,"ion-icon",14),t.qZA(),t.TgZ(29,"ion-input",15),t.NdJ("ngModelChange",function(e){t.CHM(n);const p=t.oxw();return t.KtG(p.mapNumber2=e)}),t.qZA(),t.TgZ(30,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.loadMap2())}),t._UZ(31,"ion-icon",16),t.qZA()()(),t.TgZ(32,"ion-buttons",17)(33,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.nextMap2())}),t._UZ(34,"ion-icon",18),t.qZA()()()(),t._UZ(35,"iframe",19),t.qZA()(),t.TgZ(36,"div",21)(37,"div",22)(38,"ion-header")(39,"ion-toolbar")(40,"ion-buttons",11)(41,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.previousMap3())}),t._UZ(42,"ion-icon",13),t.qZA()(),t.TgZ(43,"div",0)(44,"ion-item")(45,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.agregarTala(e.mapNumber3))}),t._UZ(46,"ion-icon",14),t.qZA(),t.TgZ(47,"ion-input",15),t.NdJ("ngModelChange",function(e){t.CHM(n);const p=t.oxw();return t.KtG(p.mapNumber3=e)}),t.qZA(),t.TgZ(48,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.loadMap3())}),t._UZ(49,"ion-icon",16),t.qZA()()(),t.TgZ(50,"ion-buttons",17)(51,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.nextMap3())}),t._UZ(52,"ion-icon",18),t.qZA()()()(),t._UZ(53,"iframe",19),t.qZA(),t.TgZ(54,"div",22)(55,"ion-header")(56,"ion-toolbar")(57,"ion-buttons",11)(58,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.previousMap4())}),t._UZ(59,"ion-icon",13),t.qZA()(),t.TgZ(60,"div",0)(61,"ion-item")(62,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.agregarTala(e.mapNumber4))}),t._UZ(63,"ion-icon",14),t.qZA(),t.TgZ(64,"ion-input",15),t.NdJ("ngModelChange",function(e){t.CHM(n);const p=t.oxw();return t.KtG(p.mapNumber4=e)}),t.qZA(),t.TgZ(65,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.loadMap4())}),t._UZ(66,"ion-icon",16),t.qZA()()(),t.TgZ(67,"ion-buttons",17)(68,"ion-button",12),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.nextMap4())}),t._UZ(69,"ion-icon",18),t.qZA()()()(),t._UZ(70,"iframe",19),t.qZA()()()}if(2&o){const n=t.oxw();t.xp6(12),t.Q6J("ngModel",n.mapNumber1),t.xp6(6),t.Q6J("src",n.mapUrl1,t.uOi),t.xp6(11),t.Q6J("ngModel",n.mapNumber2),t.xp6(6),t.Q6J("src",n.mapUrl2,t.uOi),t.xp6(12),t.Q6J("ngModel",n.mapNumber3),t.xp6(6),t.Q6J("src",n.mapUrl3,t.uOi),t.xp6(11),t.Q6J("ngModel",n.mapNumber4),t.xp6(6),t.Q6J("src",n.mapUrl4,t.uOi)}}const a=[{path:"",component:(()=>{class o{constructor(n,i){this.sanitizer=n,this.datalandService=i,this.mapNumber1=1340,this.mapNumber2=3443,this.mapNumber3=3908,this.mapNumber4=4434,this.selectedMaps="1",this.changeMaps="1"}ngOnInit(){this.datalandService.obtenerDatos().subscribe(n=>{this.lands=n})}loadMap1(){this.mapUrl1=this.sanitizer.bypassSecurityTrustResourceUrl(`https://play.pixels.xyz/pixels/share/${this.mapNumber1}`)}loadMap2(){this.mapUrl2=this.sanitizer.bypassSecurityTrustResourceUrl(`https://play.pixels.xyz/pixels/share/${this.mapNumber2}`)}loadMap3(){this.mapUrl3=this.sanitizer.bypassSecurityTrustResourceUrl(`https://play.pixels.xyz/pixels/share/${this.mapNumber3}`)}loadMap4(){this.mapUrl4=this.sanitizer.bypassSecurityTrustResourceUrl(`https://play.pixels.xyz/pixels/share/${this.mapNumber4}`)}nextMap1(){do{this.mapNumber1++}while(this.mapNumber1<=5e3&&!this.isMapValid(this.mapNumber1));this.mapNumber1<=5e3||(this.mapNumber1=1),this.loadMap1()}nextMap2(){do{this.mapNumber2++}while(this.mapNumber2<=5e3&&!this.isMapValid(this.mapNumber2));this.mapNumber2<=5e3||(this.mapNumber2=1),this.loadMap2()}nextMap3(){do{this.mapNumber3++}while(this.mapNumber3<=5e3&&!this.isMapValid(this.mapNumber3));this.mapNumber3<=5e3||(this.mapNumber3=1),this.loadMap3()}nextMap4(){do{this.mapNumber4++}while(this.mapNumber4<=5e3&&!this.isMapValid(this.mapNumber4));this.mapNumber4<=5e3||(this.mapNumber4=1),this.loadMap4()}previousMap1(){do{this.mapNumber1--}while(this.mapNumber1>=1&&!this.isMapValid(this.mapNumber1));this.mapNumber1>=1||(this.mapNumber1=5e3),this.loadMap1()}previousMap2(){do{this.mapNumber2--}while(this.mapNumber2>=1&&!this.isMapValid(this.mapNumber2));this.mapNumber2>=1||(this.mapNumber2=5e3),this.loadMap2()}previousMap3(){do{this.mapNumber3--}while(this.mapNumber3>=1&&!this.isMapValid(this.mapNumber3));this.mapNumber3>=1||(this.mapNumber3=5e3),this.loadMap3()}previousMap4(){do{this.mapNumber4--}while(this.mapNumber4>=1&&!this.isMapValid(this.mapNumber4));this.mapNumber4>=1||(this.mapNumber4=5e3),this.loadMap4()}isMapValid(n){const i=this.lands.find(e=>e.numero===n);return i&&!0===i.foresting}loadAllMap(){this.loadMap1(),"2"===this.selectedMaps&&this.loadMap2(),"4"===this.selectedMaps&&(this.loadMap2(),this.loadMap3(),this.loadMap4())}changeAllMap(){clearInterval(this.intervalMaps);let n=0;"1"!==this.changeMaps&&("2"===this.changeMaps?n=5e3:"3"===this.changeMaps?n=1e4:"4"===this.changeMaps?n=15e3:"5"===this.changeMaps&&(n=2e4),this.intervalMaps=setInterval(()=>{this.nextMap1(),"2"===this.selectedMaps&&this.nextMap2(),"4"===this.selectedMaps&&(this.nextMap2(),this.nextMap3(),this.nextMap4())},n))}agregarTala(n){const C=`${(new Date).getTime()+261e5}`;this.datalandService.agregarInformacionTala(n,C).subscribe(N=>{console.log("Informaci\xf3n de tala agregada correctamente",N)},N=>{console.error("Error al agregar informaci\xf3n de tala",N)})}ngAfterViewInit(){var n=this;return(0,x.Z)(function*(){n.loadAllMap()})()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(Z.H7),t.Y36(m.h))},o.\u0275cmp=t.Xpm({type:o,selectors:[["page-map"]],decls:31,vars:5,consts:[[1,"floating-input"],[2,"color","black"],[3,"ngModel","ngModelChange","ionChange"],["value","1"],["value","2"],["value","4"],["value","3"],["value","5"],[2,"width","100%","height","6%"],["style","width: 100%; height: 94%;",4,"ngIf"],[2,"width","100%","height","94%"],["slot","start"],[1,"floating-button",3,"click"],["name","arrow-back"],["name","hammer"],["type","text","placeholder","N\xfamero del mapa",3,"ngModel","ngModelChange"],["name","search"],["slot","end"],["name","arrow-forward"],["width","100%","height","100%","frameborder","0",3,"src"],[2,"width","100%","height","50%"],[2,"width","100%","height","50%","display","flex"],[2,"width","50%","height","100%"]],template:function(n,i){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"div",0)(3,"ion-item")(4,"ion-label",1),t._uU(5,"Modo:"),t.qZA(),t.TgZ(6,"ion-select",2),t.NdJ("ngModelChange",function(p){return i.selectedMaps=p})("ionChange",function(){return i.loadAllMap()}),t.TgZ(7,"ion-select-option",3),t._uU(8,"1 Mapa"),t.qZA(),t.TgZ(9,"ion-select-option",4),t._uU(10,"2 Mapas"),t.qZA(),t.TgZ(11,"ion-select-option",5),t._uU(12,"4 Mapas"),t.qZA()(),t.TgZ(13,"ion-label",1),t._uU(14,"Velocidad:"),t.qZA(),t.TgZ(15,"ion-select",2),t.NdJ("ngModelChange",function(p){return i.changeMaps=p})("ionChange",function(){return i.changeAllMap()}),t.TgZ(16,"ion-select-option",3),t._uU(17,"Manual"),t.qZA(),t.TgZ(18,"ion-select-option",4),t._uU(19,"5 Segundos"),t.qZA(),t.TgZ(20,"ion-select-option",6),t._uU(21,"10 Segundos"),t.qZA(),t.TgZ(22,"ion-select-option",5),t._uU(23,"15 Segundos"),t.qZA(),t.TgZ(24,"ion-select-option",7),t._uU(25,"20 Segundos"),t.qZA()()()()()(),t.TgZ(26,"ion-content"),t._UZ(27,"div",8),t.YNc(28,T,17,2,"div",9),t.YNc(29,r,35,4,"div",9),t.YNc(30,_,71,8,"div",9),t.qZA()),2&n&&(t.xp6(6),t.Q6J("ngModel",i.selectedMaps),t.xp6(9),t.Q6J("ngModel",i.changeMaps),t.xp6(13),t.Q6J("ngIf","1"==i.selectedMaps),t.xp6(1),t.Q6J("ngIf","2"==i.selectedMaps),t.xp6(1),t.Q6J("ngIf","4"==i.selectedMaps))},dependencies:[h.O5,s.YG,s.Sm,s.W2,s.Gu,s.gu,s.pK,s.Ie,s.Q$,s.t9,s.n0,s.sr,s.QI,s.j9,M.JJ,M.On],styles:['@charset "UTF-8";ion-toolbar[_ngcontent-%COMP%]{--background: transparent;--color: white;text-align:center;position:absolute;top:0;right:0;left:0}.floating-input[_ngcontent-%COMP%]{--background: transparent;align-items:center}.floating-input[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;border-radius:10px;padding:5px}.floating-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--background: transparent;text-align:center;color:#fff;border:none;border-radius:10px}.floating-input[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{color:#000}.floating-input[_ngcontent-%COMP%]   .floating-button[_ngcontent-%COMP%]{--background: transparent;border-radius:50%}ion-content[_ngcontent-%COMP%]{position:relative;z-index:1}']}),o})()}];let c=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[f.Bz.forChild(a),f.Bz]}),o})(),d=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.ez,s.Pc,M.u5,c]}),o})()},9287:(v,b,l)=>{l.d(b,{h:()=>Z});var h=l(9646),s=l(9751),M=l(4004),f=l(262),x=l(9523),t=l(3144);let Z=(()=>{class m{constructor(r){this.http=r,this.localStorageKey="landsData",this.jsonUrl="assets/data/landsdata.json"}obtenerDatosDesdeLocalStorage(){const r=localStorage.getItem(this.localStorageKey);return r?JSON.parse(r):[]}guardarDatosEnLocalStorage(r){localStorage.setItem(this.localStorageKey,JSON.stringify(r))}obtenerDatos(){const r=this.obtenerDatosDesdeLocalStorage();return r.length>0?(0,h.of)(r):this.http.get(this.jsonUrl).pipe((0,M.U)(_=>(this.guardarDatosEnLocalStorage(_),_)),(0,f.K)(_=>(console.error("Error al cargar datos desde el archivo JSON:",_),(0,h.of)([]))))}agregarInformacionTala(r,_){return new s.y(u=>{this.obtenerDatos().subscribe(a=>{const c=a.findIndex(d=>d.numero===r);-1!==c?(a[c].felling=a[c].felling||[],a[c].felling.push(_),this.guardarDatosEnLocalStorage(a),u.next(a),u.complete()):u.error("Elemento no encontrado")})})}obtenerItemsConFelling(){return this.obtenerDatos().pipe((0,M.U)(r=>r.filter(_=>_.felling&&_.felling.length>0)))}eliminarTiempoTala(r,_){return new s.y(u=>{this.obtenerDatos().subscribe(a=>{const c=a.findIndex(d=>d.numero===r);if(-1!==c){a[c].felling=a[c].felling||[];const d=a[c].felling.indexOf(_);-1!==d?(a[c].felling.splice(d,1),this.guardarDatosEnLocalStorage(a),u.next(a),u.complete()):u.error("Fecha de tala no encontrada")}else u.error("Elemento no encontrado")})})}actualizarTiempoTala(r,_){return new s.y(u=>{this.obtenerDatos().subscribe(a=>{const c=a.findIndex(d=>d.numero===r);if(-1!==c){a[c].felling=a[c].felling||[];const d=a[c].felling.indexOf(_);if(-1!==d){const n=(new Date).getTime()+261e5;a[c].felling[d]=`${n}`,this.guardarDatosEnLocalStorage(a),u.next(a),u.complete()}else u.error("Fecha de tala no encontrada")}else u.error("Elemento no encontrado")})})}}return m.\u0275fac=function(r){return new(r||m)(x.LFG(t.eN))},m.\u0275prov=x.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()}}]);