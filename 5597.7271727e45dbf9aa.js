"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5597],{5597:(Z,u,l)=>{l.r(u),l.d(u,{MapModule:()=>C});var d=l(4755),i=l(7151),g=l(5030),m=l(6775),t=l(9523),h=l(6550),M=l(9287);function _(a,c){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"ion-header")(2,"ion-toolbar")(3,"ion-buttons",11)(4,"ion-button",12),t.NdJ("click",function(){const s=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.previousMap(o.mapUrls.indexOf(s)))}),t._UZ(5,"ion-icon",13),t.qZA()(),t.TgZ(6,"div",0)(7,"ion-item")(8,"ion-button",12),t.NdJ("click",function(){const s=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.agregarTala(o.mapNumbers[o.mapUrls.indexOf(s)]))}),t._UZ(9,"ion-icon",14),t.qZA(),t.TgZ(10,"ion-input",15),t.NdJ("ngModelChange",function(r){const o=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.mapNumbers[p.mapUrls.indexOf(o)]=r)}),t.qZA(),t.TgZ(11,"ion-button",12),t.NdJ("click",function(){const s=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.loadMap(o.mapUrls.indexOf(s)))}),t._UZ(12,"ion-icon",16),t.qZA()()(),t.TgZ(13,"ion-buttons",17)(14,"ion-button",12),t.NdJ("click",function(){const s=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.nextMap(o.mapUrls.indexOf(s)))}),t._UZ(15,"ion-icon",18),t.qZA()()()(),t._UZ(16,"iframe",19),t.qZA()}if(2&a){const e=c.$implicit,n=t.oxw();t.Gre("mapcontainer-",n.mapUrls.length,""),t.xp6(10),t.Q6J("ngModel",n.mapNumbers[n.mapUrls.indexOf(e)]),t.xp6(6),t.Q6J("src",e,t.uOi)}}const f=[{path:"",component:(()=>{class a{constructor(e,n){this.sanitizer=e,this.datalandService=n,this.mapNumbers=[1340,3443,3908,4434],this.selectedMaps=1,this.changeMaps=1,this.mapUrls=[]}ngOnInit(){this.datalandService.obtenerDatos().subscribe(e=>{this.lands=e})}loadMaps(){this.selectedMaps||(this.selectedMaps=1);for(let e=0;e<this.selectedMaps;e++)this.mapUrls[e]=this.sanitizer.bypassSecurityTrustResourceUrl(`https://play.pixels.xyz/pixels/share/${this.mapNumbers[e]}`)}changeAllMaps(){clearInterval(this.intervalMaps);let e=0;switch(this.changeMaps){case 1:return;case 2:e=5e3;break;case 3:e=1e4;break;case 4:e=15e3;break;case 5:e=2e4}this.intervalMaps=setInterval(()=>{for(let n=0;n<this.selectedMaps;n++)this.nextMap(n)},e)}nextMap(e){do{this.mapNumbers[e]++}while(this.mapNumbers[e]<=5e3&&!this.isMapValid(this.mapNumbers[e]));this.mapNumbers[e]<=5e3||(this.mapNumbers[e]=1),this.loadMap(e)}loadMap(e){this.mapUrls[e]=this.sanitizer.bypassSecurityTrustResourceUrl(`https://play.pixels.xyz/pixels/share/${this.mapNumbers[e]}`)}previousMap(e){do{this.mapNumbers[e]--}while(this.mapNumbers[e]>=1&&!this.isMapValid(this.mapNumbers[e]));this.mapNumbers[e]>=1||(this.mapNumbers[e]=5e3),this.loadMap(e)}isMapValid(e){const n=this.lands.find(r=>r.numero===e);return n&&!0===n.foresting}agregarTala(e){const o=`${(new Date).getTime()+261e5}`;this.datalandService.agregarInformacionTala(e,o).subscribe(p=>{console.log("Informaci\xf3n de tala agregada correctamente",p)},p=>{console.error("Error al agregar informaci\xf3n de tala",p)})}ngAfterViewInit(){this.loadMaps()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(h.H7),t.Y36(M.h))},a.\u0275cmp=t.Xpm({type:a,selectors:[["page-map"]],decls:30,vars:3,consts:[[1,"floating-input"],[2,"color","black"],[3,"ngModel","ngModelChange","ionChange"],["value","1"],["value","2"],["value","4"],["value","3"],["value","5"],[2,"width","100%","height","6%"],[1,"grid-container",2,"width","100%","height","94%"],[3,"class",4,"ngFor","ngForOf"],["slot","start"],[1,"floating-button",3,"click"],["name","arrow-back"],["name","hammer"],["type","text","placeholder","N\xfamero del mapa",3,"ngModel","ngModelChange"],["name","search"],["slot","end"],["name","arrow-forward"],["width","100%","height","100%","frameborder","0",3,"src"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"div",0)(3,"ion-item")(4,"ion-label",1),t._uU(5,"Modo:"),t.qZA(),t.TgZ(6,"ion-select",2),t.NdJ("ngModelChange",function(s){return n.selectedMaps=s})("ionChange",function(){return n.loadMaps()}),t.TgZ(7,"ion-select-option",3),t._uU(8,"1 Mapa"),t.qZA(),t.TgZ(9,"ion-select-option",4),t._uU(10,"2 Mapas"),t.qZA(),t.TgZ(11,"ion-select-option",5),t._uU(12,"4 Mapas"),t.qZA()(),t.TgZ(13,"ion-label",1),t._uU(14,"Velocidad:"),t.qZA(),t.TgZ(15,"ion-select",2),t.NdJ("ngModelChange",function(s){return n.changeMaps=s})("ionChange",function(){return n.changeAllMaps()}),t.TgZ(16,"ion-select-option",3),t._uU(17,"Manual"),t.qZA(),t.TgZ(18,"ion-select-option",4),t._uU(19,"5 Segundos"),t.qZA(),t.TgZ(20,"ion-select-option",6),t._uU(21,"10 Segundos"),t.qZA(),t.TgZ(22,"ion-select-option",5),t._uU(23,"15 Segundos"),t.qZA(),t.TgZ(24,"ion-select-option",7),t._uU(25,"20 Segundos"),t.qZA()()()()()(),t.TgZ(26,"ion-content"),t._UZ(27,"div",8),t.TgZ(28,"div",9),t.YNc(29,_,17,5,"div",10),t.qZA()()),2&e&&(t.xp6(6),t.Q6J("ngModel",n.selectedMaps),t.xp6(9),t.Q6J("ngModel",n.changeMaps),t.xp6(14),t.Q6J("ngForOf",n.mapUrls))},dependencies:[d.sg,i.YG,i.Sm,i.W2,i.Gu,i.gu,i.pK,i.Ie,i.Q$,i.t9,i.n0,i.sr,i.QI,i.j9,g.JJ,g.On],styles:['@charset "UTF-8";.mapcontainer-1[_ngcontent-%COMP%]{width:100%;height:100%}.mapcontainer-2[_ngcontent-%COMP%]{width:100%;height:50%}.mapcontainer-4[_ngcontent-%COMP%]{width:50%;height:50%}.grid-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:stretch}ion-toolbar[_ngcontent-%COMP%]{--background: transparent;--color: white;text-align:center;position:absolute;top:0;right:0;left:0}.floating-input[_ngcontent-%COMP%]{--background: transparent;align-items:center}.floating-input[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;border-radius:10px;padding:5px}.floating-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--background: transparent;text-align:center;color:#fff;border:none;border-radius:10px}.floating-input[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{color:#000}.floating-input[_ngcontent-%COMP%]   .floating-button[_ngcontent-%COMP%]{--background: transparent;border-radius:50%}ion-content[_ngcontent-%COMP%]{position:relative;z-index:1}']}),a})()}];let b=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[m.Bz.forChild(f),m.Bz]}),a})(),C=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[d.ez,i.Pc,g.u5,b]}),a})()}}]);